raw`Route110_SeasideCyclingRoadNorthEntrance_MapScripts::
	map_script MAP_SCRIPT_ON_TRANSITION, Route110_SeasideCyclingRoadNorthEntrance_OnTransition
	.byte 0

Route110_SeasideCyclingRoadNorthEntrance_OnTransition:
	call_if_eq VAR_CYCLING_CHALLENGE_STATE, 3, Route110_SeasideCyclingRoadNorthEntrance_EventScript_RestartChallenge
	call_if_eq VAR_CYCLING_CHALLENGE_STATE, 2, Route110_SeasideCyclingRoadNorthEntrance_EventScript_RestartChallenge
	end

Route110_SeasideCyclingRoadNorthEntrance_EventScript_RestartChallenge::
	setvar VAR_CYCLING_CHALLENGE_STATE, 1
	return

Route110_SeasideCyclingRoadNorthEntrance_EventScript_Clerk::
	lock
	faceplayer
	msgbox Route110_SeasideCyclingRoadNorthEntrance_Text_GoAllOutOnCyclingRoad, MSGBOX_DEFAULT
	release
	end

Route110_SeasideCyclingRoadNorthEntrance_EventScript_BikeCheck::
	lockall
	specialvar VAR_RESULT, GetPlayerAvatarBike
	call_if_eq VAR_RESULT, 2, Route110_SeasideCyclingRoadNorthEntrance_EventScript_OnMachBike
	goto_if_eq VAR_RESULT, 0, Route110_SeasideCyclingRoadNorthEntrance_EventScript_NoBike
	setflag FLAG_SYS_CYCLING_ROAD
	setvar VAR_TEMP_1, 1
	releaseall
	end

Route110_SeasideCyclingRoadNorthEntrance_EventScript_OnMachBike::
	setvar VAR_CYCLING_CHALLENGE_STATE, 1
	return

Route110_SeasideCyclingRoadNorthEntrance_EventScript_NoBike::
	msgbox Route110_SeasideCyclingRoadNorthEntrance_Text_TooDangerousToWalk, MSGBOX_DEFAULT
	closemessage
	applymovement OBJ_EVENT_ID_PLAYER, Route110_SeasideCyclingRoadNorthEntrance_Movement_PushPlayerBackFromCounter
	waitmovement 0
	releaseall
	end

Route110_SeasideCyclingRoadNorthEntrance_Movement_PushPlayerBackFromCounter:
	walk_left
	step_end

Route110_SeasideCyclingRoadNorthEntrance_Text_GoAllOutOnCyclingRoad:
	.string "On CYCLING ROAD, you can go all out\n"
	.string "and cycle as fast as you'd like.\p"
	.string "It feels great to go that fast, but try\n"
	.string "not to crash into anyone!$"

Route110_SeasideCyclingRoadNorthEntrance_Text_TooDangerousToWalk:
	.string "Sorry, you can't walk on CYCLING\n"
	.string "ROAD. It's too dangerous.\p"
	.string "Please come back with a BIKE.$"
`

script Route110_SeasideCyclingRoadNorthEntrance_EventScript_ClearCyclingRoad{
	lockall
    if(var(VAR_SPEEDWAGON_STATE) == 3){
        applymovement(1, Common_Movement_FacePlayer)
        waitmovement(1)
        msgbox(Route110_SeasideCyclingRoadNorthEntrance_Text_AreYouCrazy, MSGBOX_AUTOCLOSE)
        waitmessage
        playse(SE_PIN)
        applymovement(1, Common_Movement_ExclamationMark)
        waitmovement(1)
        msgbox(Route110_SeasideCyclingRoadNorthEntrance_Text_ThatBadge)
        waitmessage
        applymovement(1, Common_Movement_FaceOriginalDirection)
        waitmovement(1)
        setvar(VAR_SPEEDWAGON_STATE, 4)
    }
    elif(var(VAR_SPEEDWAGON_STATE) == 4){
        applymovement(1, Common_Movement_FacePlayer)
        waitmovement(1)
        msgbox("Please, help us!", MSGBOX_AUTOCLOSE)
        waitmessage
        applymovement(1, Common_Movement_FaceOriginalDirection)
        waitmovement(1)
    }
    else{
	    setvar(VAR_CYCLING_CHALLENGE_STATE, 0)
	    clearflag(FLAG_SYS_CYCLING_ROAD)
	    setvar(VAR_TEMP_1, 0)
    }
	releaseall
	end
}

text Route110_SeasideCyclingRoadNorthEntrance_Text_AreYouCrazy{
    "Wait!\p
    You're gonna go confront them?!\n
    Are you insane?!"
}

text Route110_SeasideCyclingRoadNorthEntrance_Text_ThatBadge{
    "That BADGE...! You must be a strong\n
    TRAINER.\l
    Please, help us!"
}
